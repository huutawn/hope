<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Real-time Messaging - Hope Project</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .header {
            background-color: #007bff;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .section {
            margin: 20px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .section.active {
            background-color: #e8f5e8;
            border-color: #28a745;
        }
        .section h3 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        input:focus, textarea:focus, select:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.3);
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        .btn-primary:hover:not(:disabled) {
            background-color: #0056b3;
        }
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        .btn-success:hover:not(:disabled) {
            background-color: #218838;
        }
        .btn-warning {
            background-color: #ffc107;
            color: black;
        }
        .btn-warning:hover:not(:disabled) {
            background-color: #e0a800;
        }
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        .btn-danger:hover:not(:disabled) {
            background-color: #c82333;
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .messages-container {
            height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 10px;
            background-color: white;
            border-radius: 4px;
        }
        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 8px;
            max-width: 70%;
            word-wrap: break-word;
        }
        .message.sent {
            background-color: #007bff;
            color: white;
            margin-left: auto;
            text-align: right;
        }
        .message.received {
            background-color: #f1f3f4;
            color: #333;
            margin-right: auto;
        }
        .message .sender {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        .message .time {
            font-size: 10px;
            opacity: 0.7;
            margin-top: 5px;
        }
        .log-container {
            height: 150px;
            overflow-y: auto;
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            border-radius: 4px;
        }
        .log-entry {
            margin-bottom: 5px;
            padding: 2px 0;
        }
        .log-entry.error {
            color: #fc8181;
        }
        .log-entry.success {
            color: #68d391;
        }
        .log-entry.info {
            color: #63b3ed;
        }
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .user-info {
            background-color: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Test Real-time Messaging System</h1>
            <p>H·ªá th·ªëng test tin nh·∫Øn th·ªùi gian th·ª±c v·ªõi x√°c th·ª±c JWT</p>
        </div>

        <!-- Ph·∫ßn ƒëƒÉng nh·∫≠p -->
        <div class="section" id="loginSection">
            <h3>üîê ƒêƒÉng Nh·∫≠p</h3>
            <div id="loginStatus" class="status info">
                Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ s·ª≠ d·ª•ng h·ªá th·ªëng messaging
            </div>
            
            <div class="form-group">
                <label for="loginEmail">Email:</label>
                <input type="email" id="loginEmail" placeholder="Nh·∫≠p email c·ªßa b·∫°n (v√≠ d·ª•: user@example.com)">
            </div>
            
            <div class="form-group">
                <label for="loginPassword">M·∫≠t kh·∫©u:</label>
                <input type="password" id="loginPassword" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
            </div>
            
            <button class="btn-primary" onclick="login()">ƒêƒÉng Nh·∫≠p</button>
            <button class="btn-warning" onclick="logout()" id="logoutBtn" disabled>ƒêƒÉng Xu·∫•t</button>
        </div>

        <!-- Th√¥ng tin ng∆∞·ªùi d√πng -->
        <div class="user-info" id="userInfo" style="display: none;">
            <strong>üë§ Ng∆∞·ªùi d√πng hi·ªán t·∫°i:</strong> <span id="currentUser"></span><br>
            <strong>üîë Token:</strong> <span id="tokenDisplay" style="font-family: monospace; font-size: 10px;"></span>
        </div>

        <!-- Ph·∫ßn k·∫øt n·ªëi WebSocket -->
        <div class="section" id="websocketSection" style="display: none;">
            <h3>üåê K·∫øt N·ªëi WebSocket</h3>
            <div id="connectionStatus" class="status info">
                Ch∆∞a k·∫øt n·ªëi WebSocket
            </div>
            
            <button class="btn-success" onclick="connectWebSocket()" id="connectBtn">K·∫øt N·ªëi WebSocket</button>
            <button class="btn-danger" onclick="disconnectWebSocket()" id="disconnectBtn" disabled>Ng·∫Øt K·∫øt N·ªëi</button>
        </div>

        <!-- Ph·∫ßn g·ª≠i tin nh·∫Øn -->
        <div class="two-column">
            <div class="section" id="messagingSection" style="display: none;">
                <h3>üí¨ G·ª≠i Tin Nh·∫Øn</h3>
                
                <div class="form-group">
                    <label for="receiverEmail">Email ng∆∞·ªùi nh·∫≠n:</label>
                    <input type="email" id="receiverEmail" placeholder="Nh·∫≠p email ng∆∞·ªùi nh·∫≠n">
                </div>
                
                <div class="form-group">
                    <label for="messageContent">N·ªôi dung tin nh·∫Øn:</label>
                    <textarea id="messageContent" rows="3" placeholder="Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n..."></textarea>
                </div>
                
                <button class="btn-primary" onclick="sendMessage()" id="sendMessageBtn">G·ª≠i Tin Nh·∫Øn</button>
                <button class="btn-success" onclick="sendPrivateMessage()">G·ª≠i Tin Nh·∫Øn Ri√™ng</button>
                
                <h4>üìù Tin nh·∫Øn nh√≥m:</h4>
                <div class="form-group">
                    <label for="roomId">ID ph√≤ng:</label>
                    <input type="text" id="roomId" placeholder="Nh·∫≠p ID ph√≤ng (v√≠ d·ª•: room1)">
                </div>
                <button class="btn-warning" onclick="sendRoomMessage()">G·ª≠i Tin Nh·∫Øn Nh√≥m</button>
            </div>

            <div class="section" id="messagesDisplay" style="display: none;">
                <h3>üì® Tin Nh·∫Øn Nh·∫≠n ƒê∆∞·ª£c</h3>
                <div class="messages-container" id="messagesContainer">
                    <div style="text-align: center; color: #666; margin-top: 100px;">
                        Ch∆∞a c√≥ tin nh·∫Øn n√†o
                    </div>
                </div>
                <button class="btn-warning" onclick="clearMessages()">X√≥a T·∫•t C·∫£ Tin Nh·∫Øn</button>
            </div>
        </div>

        <!-- Ph·∫ßn logs -->
        <div class="section">
            <h3>üìã Logs H·ªá Th·ªëng</h3>
            <div class="log-container" id="logContainer">
                <div class="log-entry info">H·ªá th·ªëng ƒë√£ s·∫µn s√†ng. Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ b·∫Øt ƒë·∫ßu.</div>
            </div>
            <button class="btn-warning" onclick="clearLogs()">X√≥a Logs</button>
        </div>
    </div>

    <script>
        // Bi·∫øn to√†n c·ª•c
        let stompClient = null;
        let currentUserEmail = '';
        let jwtToken = '';
        let isLoggedIn = false;
        let isWebSocketConnected = false;

        // H√†m log
        function addLog(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        // H√†m c·∫≠p nh·∫≠t status
        function updateStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status ${type}`;
        }

        // H√†m ƒëƒÉng nh·∫≠p
        async function login() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            if (!email || !password) {
                updateStatus('loginStatus', 'Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß email v√† m·∫≠t kh·∫©u!', 'error');
                addLog('L·ªói: Thi·∫øu email ho·∫∑c m·∫≠t kh·∫©u', 'error');
                return;
            }

            addLog('ƒêang th·ª±c hi·ªán ƒëƒÉng nh·∫≠p...', 'info');
            updateStatus('loginStatus', 'ƒêang ƒëƒÉng nh·∫≠p...', 'info');

            try {
                const response = await fetch('http://localhost:8080/api/auth/token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: email,
                        password: password
                    })
                });

                const result = await response.json();
                
                if (response.ok ) {
                    // ƒêƒÉng nh·∫≠p th√†nh c√¥ng
                    jwtToken = result.data.result.token;
                    currentUserEmail = email;
                    isLoggedIn = true;
                    
                    updateStatus('loginStatus', 'ƒêƒÉng nh·∫≠p th√†nh c√¥ng!', 'success');
                    addLog(`ƒêƒÉng nh·∫≠p th√†nh c√¥ng v·ªõi email: ${email}`, 'success');
                    
                    // Hi·ªÉn th·ªã th√¥ng tin user
                    document.getElementById('currentUser').textContent = email;
                    document.getElementById('tokenDisplay').textContent = jwtToken.substring(0, 50) + '...';
                    document.getElementById('userInfo').style.display = 'block';
                    
                    // Enable/disable buttons
                    document.getElementById('logoutBtn').disabled = false;
                    
                    // Hi·ªÉn th·ªã section WebSocket
                    document.getElementById('websocketSection').style.display = 'block';
                    document.getElementById('loginSection').classList.add('active');
                    
                } else {
                    // ƒêƒÉng nh·∫≠p th·∫•t b·∫°i
                    const errorMessage = result.message || 'ƒêƒÉng nh·∫≠p th·∫•t b·∫°i';
                    updateStatus('loginStatus', errorMessage, 'error');
                    addLog(`L·ªói ƒëƒÉng nh·∫≠p: ${errorMessage}`, 'error');
                }
            } catch (error) {
                const errorMessage = `L·ªói k·∫øt n·ªëi: ${error.message}`;
                updateStatus('loginStatus', errorMessage, 'error');
                addLog(errorMessage, 'error');
            }
        }

        // H√†m ƒëƒÉng xu·∫•t
        function logout() {
            // Ng·∫Øt k·∫øt n·ªëi WebSocket n·∫øu ƒëang k·∫øt n·ªëi
            if (isWebSocketConnected) {
                disconnectWebSocket();
            }
            
            // Reset tr·∫°ng th√°i
            jwtToken = '';
            currentUserEmail = '';
            isLoggedIn = false;
            
            updateStatus('loginStatus', 'ƒê√£ ƒëƒÉng xu·∫•t', 'info');
            addLog('Ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng xu·∫•t', 'info');
            
            // ·∫®n c√°c section
            document.getElementById('userInfo').style.display = 'none';
            document.getElementById('websocketSection').style.display = 'none';
            document.getElementById('messagingSection').style.display = 'none';
            document.getElementById('messagesDisplay').style.display = 'none';
            document.getElementById('loginSection').classList.remove('active');
            
            // Disable buttons
            document.getElementById('logoutBtn').disabled = true;
            
            // Clear form
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        // H√†m k·∫øt n·ªëi WebSocket
        function connectWebSocket() {
            if (!isLoggedIn || !jwtToken) {
                addLog('L·ªói: Vui l√≤ng ƒëƒÉng nh·∫≠p tr∆∞·ªõc khi k·∫øt n·ªëi WebSocket', 'error');
                return;
            }

            addLog('ƒêang k·∫øt n·ªëi WebSocket...', 'info');
            updateStatus('connectionStatus', 'ƒêang k·∫øt n·ªëi...', 'info');

            try {
                const socket = new SockJS('http://localhost:8080/ws');
                stompClient = Stomp.over(socket);
                
                // K·∫øt n·ªëi v·ªõi JWT token
                stompClient.connect(
                    { login: jwtToken }, // Truy·ªÅn JWT token l√†m login parameter
                    function(frame) {
                        addLog('K·∫øt n·ªëi WebSocket th√†nh c√¥ng!', 'success');
                        updateStatus('connectionStatus', 'ƒê√£ k·∫øt n·ªëi WebSocket', 'success');
                        isWebSocketConnected = true;
                        
                        // Enable/disable buttons
                        document.getElementById('connectBtn').disabled = true;
                        document.getElementById('disconnectBtn').disabled = false;
                        
                        // Hi·ªÉn th·ªã section messaging
                        document.getElementById('messagingSection').style.display = 'block';
                        document.getElementById('messagesDisplay').style.display = 'block';
                        document.getElementById('websocketSection').classList.add('active');
                        
                        // Subscribe to personal message queue
                        stompClient.subscribe('/user/queue/messages', function(message) {
                            const messageObj = JSON.parse(message.body);
                            addLog(`Nh·∫≠n tin nh·∫Øn t·ª´ ${messageObj.senderEmail || 'Unknown'}`, 'success');
                            displayMessage(messageObj, 'received');
                        });

                        // Subscribe to notifications
                        stompClient.subscribe('/user/queue/notifications', function(notification) {
                            const notificationObj = JSON.parse(notification.body);
                            addLog(`Nh·∫≠n th√¥ng b√°o: ${notificationObj.title}`, 'info');
                        });

                        addLog('ƒê√£ ƒëƒÉng k√Ω nh·∫≠n tin nh·∫Øn v√† th√¥ng b√°o', 'success');
                    },
                    function(error) {
                        addLog(`L·ªói k·∫øt n·ªëi WebSocket: ${error}`, 'error');
                        updateStatus('connectionStatus', 'K·∫øt n·ªëi th·∫•t b·∫°i', 'error');
                        isWebSocketConnected = false;
                    }
                );
            } catch (error) {
                addLog(`L·ªói WebSocket: ${error.message}`, 'error');
                updateStatus('connectionStatus', 'K·∫øt n·ªëi th·∫•t b·∫°i', 'error');
            }
        }

        // H√†m ng·∫Øt k·∫øt n·ªëi WebSocket
        function disconnectWebSocket() {
            if (stompClient !== null) {
                stompClient.disconnect();
                addLog('ƒê√£ ng·∫Øt k·∫øt n·ªëi WebSocket', 'info');
            }
            
            updateStatus('connectionStatus', 'ƒê√£ ng·∫Øt k·∫øt n·ªëi', 'info');
            isWebSocketConnected = false;
            
            // Enable/disable buttons
            document.getElementById('connectBtn').disabled = false;
            document.getElementById('disconnectBtn').disabled = true;
            
            // ·∫®n section messaging
            document.getElementById('messagingSection').style.display = 'none';
            document.getElementById('messagesDisplay').style.display = 'none';
            document.getElementById('websocketSection').classList.remove('active');
        }

        // H√†m g·ª≠i tin nh·∫Øn
        function sendMessage() {
            if (!isWebSocketConnected || !stompClient) {
                addLog('L·ªói: Vui l√≤ng k·∫øt n·ªëi WebSocket tr∆∞·ªõc', 'error');
                return;
            }

            const receiverEmail = document.getElementById('receiverEmail').value.trim();
            const content = document.getElementById('messageContent').value.trim();

            if (!receiverEmail || !content) {
                addLog('L·ªói: Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß email ng∆∞·ªùi nh·∫≠n v√† n·ªôi dung tin nh·∫Øn', 'error');
                return;
            }

            const messageRequest = {
                senderEmail: currentUserEmail,
                receiverEmail: receiverEmail,
                content: content
            };

            try {
                stompClient.send('/app/message.send', {}, JSON.stringify(messageRequest));
                addLog(`ƒê√£ g·ª≠i tin nh·∫Øn ƒë·∫øn ${receiverEmail}`, 'success');
                
                // Hi·ªÉn th·ªã tin nh·∫Øn ƒë√£ g·ª≠i
                displayMessage({
                    senderEmail: currentUserEmail,
                    receiverEmail: receiverEmail,
                    content: content,
                    sentAt: new Date().toISOString()
                }, 'sent');
                
                // Clear message input
                document.getElementById('messageContent').value = '';
                
            } catch (error) {
                addLog(`L·ªói g·ª≠i tin nh·∫Øn: ${error.message}`, 'error');
            }
        }

        // H√†m g·ª≠i tin nh·∫Øn ri√™ng
        function sendPrivateMessage() {
            if (!isWebSocketConnected || !stompClient) {
                addLog('L·ªói: Vui l√≤ng k·∫øt n·ªëi WebSocket tr∆∞·ªõc', 'error');
                return;
            }

            const receiverEmail = document.getElementById('receiverEmail').value.trim();
            const content = document.getElementById('messageContent').value.trim();

            if (!receiverEmail || !content) {
                addLog('L·ªói: Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin', 'error');
                return;
            }

            const messageRequest = {
                senderEmail: currentUserEmail,
                receiverEmail: receiverEmail,
                content: content
            };

            try {
                stompClient.send('/app/message.private', {}, JSON.stringify(messageRequest));
                addLog(`ƒê√£ g·ª≠i tin nh·∫Øn ri√™ng ƒë·∫øn ${receiverEmail}`, 'success');
                
                // Clear message input
                document.getElementById('messageContent').value = '';
                
            } catch (error) {
                addLog(`L·ªói g·ª≠i tin nh·∫Øn ri√™ng: ${error.message}`, 'error');
            }
        }

        // H√†m g·ª≠i tin nh·∫Øn nh√≥m
        function sendRoomMessage() {
            if (!isWebSocketConnected || !stompClient) {
                addLog('L·ªói: Vui l√≤ng k·∫øt n·ªëi WebSocket tr∆∞·ªõc', 'error');
                return;
            }

            const roomId = document.getElementById('roomId').value.trim();
            const content = document.getElementById('messageContent').value.trim();

            if (!roomId || !content) {
                addLog('L·ªói: Vui l√≤ng nh·∫≠p ID ph√≤ng v√† n·ªôi dung tin nh·∫Øn', 'error');
                return;
            }

            const messageRequest = {
                senderEmail: currentUserEmail,
                receiverEmail: '', // Kh√¥ng c·∫ßn cho tin nh·∫Øn ph√≤ng
                content: content
            };

            try {
                // Subscribe to room if not already subscribed
                stompClient.subscribe('/topic/room/' + roomId, function(message) {
                    const messageObj = JSON.parse(message.body);
                    addLog(`Nh·∫≠n tin nh·∫Øn ph√≤ng [${roomId}]`, 'info');
                    displayMessage({
                        ...messageObj,
                        senderEmail: `[Room ${roomId}] ${messageObj.senderEmail || 'Unknown'}`
                    }, 'received');
                });

                stompClient.send('/app/message.room.' + roomId, {}, JSON.stringify(messageRequest));
                addLog(`ƒê√£ g·ª≠i tin nh·∫Øn ƒë·∫øn ph√≤ng ${roomId}`, 'success');
                
                // Clear message input
                document.getElementById('messageContent').value = '';
                
            } catch (error) {
                addLog(`L·ªói g·ª≠i tin nh·∫Øn ph√≤ng: ${error.message}`, 'error');
            }
        }

        // H√†m hi·ªÉn th·ªã tin nh·∫Øn
        function displayMessage(messageObj, type) {
            const messagesContainer = document.getElementById('messagesContainer');
            
            // Remove "no messages" text if exists
            if (messagesContainer.children.length === 1 && messagesContainer.children[0].style.textAlign === 'center') {
                messagesContainer.innerHTML = '';
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const senderDiv = document.createElement('div');
            senderDiv.className = 'sender';
            senderDiv.textContent = type === 'sent' ? 'B·∫°n' : (messageObj.senderEmail || 'Unknown');
            
            const contentDiv = document.createElement('div');
            contentDiv.textContent = messageObj.content;
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'time';
            timeDiv.textContent = new Date(messageObj.sentAt || new Date()).toLocaleTimeString();
            
            messageDiv.appendChild(senderDiv);
            messageDiv.appendChild(contentDiv);
            messageDiv.appendChild(timeDiv);
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // H√†m x√≥a tin nh·∫Øn
        function clearMessages() {
            const messagesContainer = document.getElementById('messagesContainer');
            messagesContainer.innerHTML = '<div style="text-align: center; color: #666; margin-top: 100px;">Ch∆∞a c√≥ tin nh·∫Øn n√†o</div>';
            addLog('ƒê√£ x√≥a t·∫•t c·∫£ tin nh·∫Øn hi·ªÉn th·ªã', 'info');
        }

        // H√†m x√≥a logs
        function clearLogs() {
            const logContainer = document.getElementById('logContainer');
            logContainer.innerHTML = '<div class="log-entry info">Logs ƒë√£ ƒë∆∞·ª£c x√≥a</div>';
        }

        // Kh·ªüi t·∫°o khi trang load
        window.onload = function() {
            addLog('Trang test real-time messaging ƒë√£ s·∫µn s√†ng', 'success');
            
            // Fill some default values for testing
            document.getElementById('loginEmail').value = 'user1@example.com';
            document.getElementById('loginPassword').value = 'password123';
            document.getElementById('receiverEmail').value = 'user2@example.com';
            document.getElementById('messageContent').value = 'Xin ch√†o! ƒê√¢y l√† tin nh·∫Øn test.';
            document.getElementById('roomId').value = 'room1';
        };

        // Handle Enter key for quick actions
        document.getElementById('loginPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                login();
            }
        });

        document.getElementById('messageContent').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
    </script>
</body>
</html>
